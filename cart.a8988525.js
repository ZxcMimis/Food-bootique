var t=globalThis,e={},r={},c=t.parcelRequire6801;null==c&&((c=function(t){if(t in e)return e[t].exports;if(t in r){var c=r[t];delete r[t];var a={id:t,exports:{}};return e[t]=a,c.call(a.exports,a,a.exports),a.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){r[t]=e},t.parcelRequire6801=c);var a=c.register;a("4T1Q4",function(t,e){Object.defineProperty(t.exports,"getProduct",{get:()=>r,set:void 0,enumerable:!0,configurable:!0});let r=async t=>{try{return await fetch(`https://food-boutique.b.goit.study/api/products/${t}`).then(t=>t.json())}catch(t){return t}}}),a("1eDY5",function(t,e){let r=document.querySelector("body"),c=document.querySelector('[data-thanks="backdrop"]'),a=document.querySelector('[data-thanks="close"]'),o=document.querySelector('[data-email="backdrop"]'),d=document.querySelector('[data-email="close"]'),s=document.querySelector("#subscribe-form"),n=[];function l(t){t.preventDefault(),(t.currentTarget!==c||t.currentTarget===t.target)&&(r.classList.toggle("no-scroll"),c.classList.toggle("is-hidden"))}function u(t){t.preventDefault(),(t.currentTarget!==o||t.currentTarget===t.target)&&(r.classList.toggle("no-scroll"),o.classList.toggle("is-hidden"))}s.addEventListener("submit",t=>{var e;t.preventDefault(),(e=t.currentTarget.querySelector("input").value,n.includes(e)||(n.push(e),0))?(t.currentTarget.querySelector("input").value="",r.classList.toggle("no-scroll"),o.classList.toggle("is-hidden")):(t.currentTarget.querySelector("input").value="",r.classList.toggle("no-scroll"),c.classList.toggle("is-hidden"))}),d.addEventListener("click",u),o.addEventListener("click",u),a.addEventListener("click",l),c.addEventListener("click",l)}),a("7xXel",function(t,e){var r=c("4T1Q4");function a(){document.querySelector("#product-backdrop").classList.add("is-hidden"),document.querySelector("[data-productmodal]").id="",document.querySelector("body").classList.remove("no-scroll"),document.querySelector("#product-img").src="",document.querySelector("#product-img").alt="",document.querySelector("#product-name").textContent="",document.querySelector("#product-category").textContent="",document.querySelector("#product-size").textContent="",document.querySelector("#product-popularity").textContent="",document.querySelector("#product-price").textContent="",document.querySelector("#product-desc").textContent=""}Object.keys(localStorage).includes("cart")||localStorage.setItem("cart",JSON.stringify([])),document.querySelector("#header-cart").textContent=JSON.parse(localStorage.getItem("cart")).length,document.querySelector("body").addEventListener("click",async t=>{if(!("true"===t.target.dataset.productadd||t.target.closest("[data-productadd]")||"true"===t.target.dataset.productclose||t.target.closest('[data-productclose="true"]')||"count"===t.target.dataset.cart||t.target.closest("[data-cart='count']"))&&("true"===t.target.dataset.product||t.target.closest("[data-product]"))){let e;document.querySelector("#product-backdrop").classList.remove("is-hidden"),document.querySelector("body").classList.add("no-scroll"),e=""!==t.target.id?t.target.id:t.target.closest("[data-product]").id,await (0,r.getProduct)(e).then(({_id:t,name:e,img:r,category:c,price:a,size:o,desc:d,is10PercentOff:s,popularity:n})=>{document.querySelector("[data-productmodal]").id=t,document.querySelector("#product-img").src=r,document.querySelector("#product-img").alt=e,document.querySelector("#product-name").textContent=e,document.querySelector("#product-category").textContent=c,document.querySelector("#product-size").textContent=o,document.querySelector("#product-popularity").textContent=n,document.querySelector("#product-price").textContent=a,document.querySelector("#product-desc").textContent=d,document.querySelector("#product-add").innerHTML=JSON.parse(localStorage.getItem("cart")).map(t=>t.id).includes(t)?`Remove from <svg class="product__icon" width="18" height="18">
            <use href="#cart"></use>
          </svg>`:`Add to <svg class="product__icon" width="18" height="18">
            <use href="#cart"></use>
          </svg>`,JSON.parse(localStorage.getItem("cart")).map(t=>t.id).includes(t)&&document.querySelector("#product-add").classList.add("remove")})}}),document.querySelector("#product-close").addEventListener("click",a),document.querySelector("#product-backdrop").addEventListener("click",t=>{t.currentTarget===t.target&&a()}),window.addEventListener("keydown",t=>{"Escape"===t.code&&a()}),document.querySelector("body").addEventListener("click",async t=>{if("true"===t.target.dataset.productadd||t.target.closest("[data-productadd]")){let e="true"===t.target.dataset.productadd?t.target:t.target.closest("[data-productadd]"),r=[...JSON.parse(localStorage.getItem("cart"))];r.map(t=>t.id).includes(t.target.closest("[data-product]").id)||(r.push({id:t.target.closest("[data-product]").id,count:1}),e.textContent="✓",localStorage.setItem("cart",JSON.stringify(r)),document.querySelector("#header-cart").textContent=JSON.parse(localStorage.getItem("cart")).length)}}),document.querySelector("[data-productmodal]").addEventListener("click",async t=>{if("true"===t.target.dataset.productaddmodal||t.target.closest("[data-productaddmodal]")){let e="true"===t.target.dataset.productaddmodal?t.target:t.target.closest("[data-productaddmodal]"),r=[...JSON.parse(localStorage.getItem("cart"))];if(e.classList.contains("remove"))console.log("ddd"),e.classList.remove("remove"),console.log(r.find(t=>t.id===document.querySelector("[data-productmodal]").id)),r.splice(r.indexOf(r.find(t=>t.id===document.querySelector("[data-productmodal]").id)),1),e.innerHTML=`Add to <svg class="product__icon" width="18" height="18">
        <use href="#cart"></use>
      </svg>`;else{if(r.map(t=>t.id).includes(t.target.closest("[data-productmodal]").id))return;e.classList.add("remove"),r.push({id:t.target.closest("[data-productmodal]").id,count:1}),e.innerHTML=`Remove from <svg class="product__icon" width="18" height="18">
            <use href="#cart"></use>
          </svg>`,localStorage.setItem("cart",JSON.stringify(r)),document.querySelector("#header-cart").textContent=JSON.parse(localStorage.getItem("cart")).length,document.getElementById(`${t.target.closest("[data-productmodal]").id}`).querySelector("[data-productadd='true']").textContent="✓"}}})});var o=c("4T1Q4");Object.keys(localStorage).includes("cart")||localStorage.setItem("cart",JSON.stringify([]));const d=()=>{if(document.querySelector("#header-cart").textContent=JSON.parse(localStorage.getItem("cart")).length,document.querySelector("#cart-length").textContent=JSON.parse(localStorage.getItem("cart")).length,document.getElementById("cart-list").innerHTML="",0===JSON.parse(localStorage.getItem("cart")).length){document.getElementById("cart-body").classList.add("display-none"),document.getElementById("cart-nobody").classList.remove("display-none");return}document.getElementById("cart-body").classList.remove("display-none"),document.getElementById("cart-nobody").classList.add("display-none"),JSON.parse(localStorage.getItem("cart")).forEach(async t=>{await (0,o.getProduct)(t.id).then(({_id:t,img:e,name:r,category:c,size:a,price:o})=>{document.getElementById("cart-list").insertAdjacentHTML("beforeend",`<li id="${t}" data-product="true" class="cart__item">
            <button data-productclose="true" class="cart__close">
              <svg class="cart__dagger" width="20" height="20">
                <use href="#close"></use>
              </svg>
            </button>
            <div class="cart__wrapper">
              <img src="${e}" alt="${r}" class="cart__img" />
            </div>
            <div class="cart__text">
              <h3 class="cart__header">${r}</h3>
              <ul class="cart__infos">
                <li class="cart__info">
                  Category: <span class="cart__value">${c}</span>
                </li>
                <li class="cart__info">
                  Size: <span class="cart__value">${a}</span>
                </li>
              </ul>
              <div class="cart__down">
                <p class="cart__dollars">$<span class="cart__cost">${o}</span></p>
                <div data-cart='count' class="cart__count">
                  <button data-action='minus' class="cart__action">
                    <svg class="cart__operation" width="14" height="14">
                      <use href="#minus"></use>
                    </svg>
                  </button>
                  <p data-action="count" class="cart__countnum">${JSON.parse(localStorage.getItem("cart")).find(e=>e.id===t).count}</p>
                  <button data-action='plus' class="cart__action">
                    <svg class="cart__operation" width="14" height="14">
                      <use href="#plus"></use>
                    </svg>
                  </button>
                </div>
              </div>  
            </div>
          </li>`)})})},s=()=>{document.querySelector("#cart-price").textContent="0",JSON.parse(localStorage.getItem("cart")).forEach(async t=>{await (0,o.getProduct)(t.id).then(({price:e})=>{let r=Number.parseFloat(document.querySelector("#cart-price").textContent);r+=t.count*e,document.querySelector("#cart-price").textContent=r.toFixed(2)})},0)};d(),s(),document.querySelector("#cart-list").addEventListener("click",t=>{if("true"===t.target.dataset.productclose||t.target.closest('[data-productclose="true"]')){let e=JSON.parse(localStorage.getItem("cart")),r=e.indexOf(e.find(e=>e.id===t.target.closest('[data-product="true"]').id));e.splice(r,1),localStorage.setItem("cart",JSON.stringify(e)),d(),s()}else if("plus"===t.target.dataset.action||t.target.closest('[data-action="plus"]')){let e=JSON.parse(localStorage.getItem("cart")),r=e.find(e=>e.id===t.target.closest('[data-product="true"]').id).count;r+=1,t.target.closest('[data-product="true"]').querySelector('[data-action="count"]').textContent=r,e.find(e=>e.id===t.target.closest('[data-product="true"]').id).count=r,localStorage.setItem("cart",JSON.stringify(e)),s()}else if("minus"===t.target.dataset.action||t.target.closest('[data-action="minus"]')){let e=JSON.parse(localStorage.getItem("cart")),r=e.find(e=>e.id===t.target.closest('[data-product="true"]').id).count;if(r<=1)return;r-=1,t.target.closest('[data-product="true"]').querySelector('[data-action="count"]').textContent=r,e.find(e=>e.id===t.target.closest('[data-product="true"]').id).count=r,localStorage.setItem("cart",JSON.stringify(e)),s()}}),document.querySelector("#cart-del").addEventListener("click",()=>{localStorage.setItem("cart",JSON.stringify([])),document.getElementById("cart-list").innerHTML="",d()});const n=document.querySelector(".order__modal"),l=document.querySelector(".cart__form"),u=document.querySelector(".order__close-btn");l.addEventListener("submit",t=>{t.preventDefault(),n.classList.toggle("is-hidden"),document.body.style.overflow="hidden",window.addEventListener("keydown",t=>{"Escape"===t.key&&(n.classList.add("is-hidden"),document.body.style.overflow="visible")})}),n.addEventListener("click",t=>{t.target===n&&(n.classList.toggle("is-hidden"),document.body.style.overflow="visible")}),u.addEventListener("click",()=>{n.classList.toggle("is-hidden"),document.body.style.overflow="visible"}),c("1eDY5"),c("7xXel");
//# sourceMappingURL=cart.a8988525.js.map
